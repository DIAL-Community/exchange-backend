<div class="row float-right">
  <button id="filter-toggle" type="button" class="btn btn-secondary"
          data-toggle="collapse" data-target="#filter-options"
          aria-expanded="false" aria-controls="filter-options">
    Filter
  </button>
</div>
<div class="collapse" id="filter-options">
  <hr />
  <%= form_tag(organizations_path, :method => "get") do %>
    <div class="form-row">
      <div class="col-md-12 mb-3">
        <%= label_tag "name" %>
        <%= text_field_tag "search", params[:search], placeholder: "Organization name ...", class: "form-control" %>
      </div>
    </div>
    <div class="form-row mb-2">
      <div class="col-md-12">
        <div class="form-check">
          <%= check_box_tag "endorser_only", true, params[:endorser_only], {class: "form-check-input"} %>
          <%= label_tag "endorser_only", nil, class: "form-check-label" %>
        </div>
      </div>
    </div>
    <div class="form-row">
      <div class="col-md-6">
        <div class="form-group">
          <%= label_tag "year_endorsed" %>
          <%= select(nil, "year_endorsed",
                     Organization
                        .all
                        .collect {|o| [ o.when_endorsed.strftime('%Y'), o.when_endorsed.strftime('%Y') ] }
                        .uniq!
                        .sort!,
                     { selected: params[:year_endorsed] },
                     { multiple: true, class: 'custom-select' }) %>
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <%= label_tag "sectors_assigned" %>
        <%= collection_select(nil, "products_assigned",
                              Sector.all.order(:name), :id, :name,
                              { selected: params[:products_assigned] },
                              { multiple: true, class: 'custom-select' }) %>
      </div>
    </div>
    <div class="form-row">
      <div class="col-md-6 mb-3">
        <%= label_tag "products_assigned" %>
        <%= collection_select(nil, "products_assigned",
                              Product.all.order(:name), :id, :name,
                              { selected: params[:products_assigned] },
                              { multiple: true, class: 'custom-select' }) %>
      </div>
    </div>
  <% end %>
  <hr />
</div>

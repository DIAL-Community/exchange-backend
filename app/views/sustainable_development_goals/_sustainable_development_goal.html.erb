
<div class="col-lg-5ths col-md-4 d-flex mt-2">
  <div class="card w-100 index-card">
    <div class="card-header bg-secondary text-white truncate-parent">
      <%= link_to sustainable_development_goal.name, sustainable_development_goal, class: 'truncate-text',
        'title' => sustainable_development_goal.name, 'data-toggle' => 'tooltip', 'data-placement' => 'top' %>
    </div>
    <div class="model-logo">
      <%= link_to(sustainable_development_goal) do %>
        <%= image_tag(sustainable_development_goal.image_file, class: 'card-img-top align-middle px-2 py-2') %>
      <% end %>
    </div>
    <div class="card-footer footer-padding">
      <%
        sdg_targets = sdg_footer(sustainable_development_goal, 'sdg_targets')
        if sdg_targets.count > 0
          content = "<div class='footer-row mb-2'>"
          concat(content.html_safe)
          sdg_targets.each do |sdg_target|
            concat(image_tag(sdg_target[:filename], title: sdg_target[:tooltip],
                             class: 'footer-img mr-1', 'data-toggle': 'tooltip', 'data-placement': 'top'))
          end
          concat('</div>'.html_safe)
        end
        use_cases = sdg_footer(sustainable_development_goal, 'use_cases')
        if use_cases.count > 0
          content = "<div class='footer-row' data-toggle='popover' data-placement='top'
                          data-title='#{t('view.workflow.index.use-case-popover', count: use_cases.count)}'
                          data-html='true' data-content='#{sdg_footer_popover(use_cases)}'>"
          concat(content.html_safe)
          concat(image_tag(use_cases[0][:filename], class: 'footer-img mb-1'))
          
          content = "<span class='small text-muted ml-1'>#{@use_case_count} #{t('model.use-case').titlecase.pluralize(@use_case_count)}</span>"
          concat(content.html_safe)
          
          concat('</div>'.html_safe)
        end
        if sdg_targets.count == 0
          content = '<div class="footer-row mb-2"></div>'
          concat(content.html_safe)
        end
        if use_cases.count == 0
          content = '<div class="footer-row"></div>'
          concat(content.html_safe)
        end
      %>
    </div>
  </div>
</div>

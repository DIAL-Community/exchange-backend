<!DOCTYPE html>
<html>
  <head>
    <title>DIAL Digital Public Goods Catalog (beta)</title>
    <%= csrf_meta_tags %>
    <meta name="turbolinks-cache-control" content="no-cache">
    <%= yield(:header_scripts) %>
    <link href="<%= stylesheet_path(session[:portal]['slug']) %>" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css"
          integrity="sha256-v8CXk4jNK+17M2pf++afnPnmYg4vfnWiCF8d72/asWI="
          crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
          integrity="sha256-h20CPZ0QyXlBuAw7A+KluUYx/3pK+c7lYEpqLTlxjYQ="
          crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css"
          integrity="sha256-PHcOkPmOshsMBC+vtJdVr5Mwb7r0LkSVJPlPrp/IMpU="
          crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.1/js.cookie.min.js"
            integrity="sha256-oE03O+I6Pzff4fiMqwEGHbdfcW7a3GRRxlL+U49L5sA="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js"
            integrity="sha256-xnX1c4jTWYY3xOD5/hVL1h37HCCGJx+USguyubBZsHQ="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/quill-image-resize-module@3.0.0/image-resize.min.js"
            integrity="sha256-0cU7MzmVW8WcU0QoR07PlryCX5uCR1S4RlLUhK32cgk="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@4.6.5/ol.css"
            integrity="sha256-72AsUmsoxyYb+HfGS44LqAscCOz3Ch/B1oUyos9lBM0="
            crossorigin="anonymous">
  
    <script src="https://cdn.jsdelivr.net/npm/openlayers@4.6.5/dist/ol.js"
              integrity="sha256-77IKwU93jwIX7zmgEBfYGHcmeO0Fx2MoWB/ooh9QkBA="
              crossorigin="anonymous"></script>
    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <style>
      .rotate-north {
        top: 65px;
        left: 0.5em;
      }
      .ol-touch .rotate-north {
        top: 80px;
      }
      <%= @stylesheet_contents %>
    </style>
    <% if Rails.env.production? || Rails.env.development? %>
      <!-- Global site tag (gtag.js) - Google Analytics -->
      <script async src="https://www.googletagmanager.com/gtag/js?id=<%= Rails.application.secrets.google_tracker %>"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', '<%= Rails.application.secrets.google_tracker %>');
      </script>
    <% end %>
    <link rel="icon" type="image/png" href="/favicon.png">
  </head>
<% if controller.action_name == 'map_fs'%>
  <body id="main-body"
        data-controller="<%= controller.controller_name %>"
        data-action="<%= controller.action_name %>"
        style="padding-top:0 !important; background-color: #f2f2f2">
    <%= yield %>
  </body>
<% else %>
<%
  # We have 4 different layout (maybe we should move this to separate layout file):
  # * Special layout for fullscreen map: map_fs for digital principles page.
  # * Layout with left side filter view: products index, orgs index, projects index,  etc
  # * Single object layout with breadcrumbs: single product, single org, single project, etc.
  # * Multi purpose layout: about page, covid resources page, list of sectors, list of locations, etc.
%>
  <body id="main-body"
        data-controller="<%= controller.controller_name %>"
        data-action="<%= controller.action_name %>">
    <%= render '/shared/marker' %>
    <%= render '/shared/topnav' %>
    <% if current_page?('/about') || current_page?(root_path) || current_page?('/covid') || current_page?('/covidresources')%>
      <div id="content" class="container">
        <%= yield %>
        <%= render 'cookies_eu/consent_banner', link: about_cookies_path, target: '_blank' %>
      </div>
    <% elsif hide_sidenav %>
      <div id="content" class="container">
        <%= yield %>
        <%= render 'cookies_eu/consent_banner', link: about_cookies_path, target: '_blank' %>
      </div>
    <% elsif display_breadcrumb %>
      <div id="content" class="container">
        <%= render '/shared/breadcrumb' %>
        <%= yield %>
        <%= render 'cookies_eu/consent_banner', link: about_cookies_path, target: '_blank' %>
      </div>
    <% else %>
      <div id="content" class="container-fluid">
        <div class="row">
          <div class="col-3 nav-container bg-dark">
            <%= render '/shared/filternav' %>
          </div>
          <div class="col-9">
            <%= render '/shared/summarynav' %>
            <%= render '/shared/activefilter' %>
            <%= yield %>
          </div>
        </div>
        <%= render 'cookies_eu/consent_banner', link: about_cookies_path, target: '_blank' %>
      </div>
    <% end %>

    <%= render '/shared/footer' %>
  </body>
<% end %>
</html>
